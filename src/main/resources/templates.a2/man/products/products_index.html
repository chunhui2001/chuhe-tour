{{#partial "blocks/title"}}
<title>产品管理 - 所有产品</title>
{{/partial}}


{{#partial "blocks/styles"}}
<style type="text/css">


</style>
{{/partial}}


{{#partial "content" }}
<h3>产品管理 - 所有产品</h3>

{{#if errorTrace }}
<pre>{{errorTrace}}</pre>
{{/if}}

{{#if flashMessage}}
<div style="color: brown">
    {{flashMessage}}
</div>
{{/if}}


<app-root></app-root>

<div style="display: none;" class="product-new-form">
    <form class="small-form" action="/mans/products" method="POST">

        <div class="input-group">
        <span>产品名称：</span>
        <input type="text" name="product_name" required placeholder="请输入产品名称"/>
        </div>

        <div class="input-group">
        <span>产品单位：</span>
        <input type="text" name="product_unit" required placeholder="请输入产品单位" />
        </div>
        <div class="input-group">
        <span>产品单价：</span>
        <input type="number" name="product_price" required placeholder="请输入产品单价" />
        </div>
        <div class="input-group">
        <span>产品规格：</span>
        <input type="text" name="product_spec" placeholder="请输入产品规格" />
        </div>
        <div class="input-group">
        <span>产品描述：</span>
        <textarea rows="10" name="product_desc" placeholder="请输入产品描述"></textarea>
        </div>

        <div style="text-align: center;margin-bottom: 1em;">
            <button type="submit" class="small primary button">保存</button>
            <button type="reset" class="small clear button">清除</button>
        </div>


    </form>
</div>

<form action="/mans/products" method="POST" style="text-align: right;">
    <input type="hidden" name="_method" value="delete" />
    <button class="button tiny primary" type="button" id="btn-product-new">新增产品</button>
    <button class="button tiny clear" type="submit" id="btn-product-del" >删除所有选中产品</button>
    <input type="hidden" id="product_ids" name="product_ids" value="" />
</form>

<div>

    <table class="table-basic" style="width: 100%;">

        <thead>
            <tr>
                <th style="text-align: center;"><input type="checkbox" id="select-all-product" /></th>
                <th>产品编号</th>
                <th>产品名称</th>
                <th style="text-align: center;">单位</th>
                <th style="text-align: right;">单价</th>
                <th style="text-align: center">规格</th>
                <!--<th>产品描述</th>-->
                <th style="text-align: center">更新时间</th>
                <th>&nbsp;</th>
            </tr>
        </thead>
        <tbody class="product-list">

            {{#compare viewData.length 'gt' 0 }}
                {{#each viewData}}
                <tr>
                    <td style="text-align: center;"><input type="checkbox" id="{{product_id}}" name="{{product_id}}" value="{{product_id}}" /></td>
                    <td style="text-align: center;">{{product_id}}</td>
                    <td style="text-align: left;">{{product_name}}</td>
                    <td style="text-align: center;">{{product_unit}}</td>
                    <td style="text-align: right;">{{product_price}}</td>
                    <td style="text-align: center;">{{product_spec}}</td>
                    <!--td>{{product_desc}}</td-->
                    <td style="text-align: center;">{{last_updated}}</td>
                    <td style="text-align: left;"><a href="/mans/products/{{product_id}}">产品详情</a></td>
                </tr>
                {{/each}}
            {{/compare}}

            {{#compare viewData.length 'eq' 0 }}
            <td colspan="7">当前还没有任何产品 ~</td>
            {{/compare}}

        </tbody>
    </table>


</div>

{{/partial}}



{{#partial "blocks/script"}}
<script type="text/javascript" src="/scripts/table/table-selectable.js"></script>
<script type="text/javascript" id="r_1">


    $(function() {

        $(document).on("click", "#btn-product-new", function () {
            $(".product-new-form").slideDown();
        });

        var selectTable = new SelectTable(
            ".product-list", "#select-all-product", "#product_ids", "#btn-product-del");

        selectTable.init();

    });

</script>
{{/partial}}


{{> layouts/layout_default}}
